# Resources

> [!NOTE] 
> 
> The resource package is a copy of Compose resources package. I decided to make a copy
> as Compose resources are very strongly tied to Compose itself and is pretty hard
> to extend because of all sealed, internal, private etc.
>
> That said, I've already added changes and extensions to suit our needs, so while
> the package is very similar for now, it will diverge in the future.
> 

## Setup

Resource support is part of the core module and the standard Adaptive Gradle plugin.

To add resources create an `adaptiveResources` directory the source set you want 
to add the resources to:

![Directories](directories.png)

Change the settings of the resource handling in the `adaptive` extension in `build.gradle.kts`:

```kotlin
adaptive {
    resources {
        publicResClass = true
        packageOfResClass = "some.library.resources"
        generateResClass = always
    }
}
```

`publicResClass`
  - `true` = generated `Res` class is public
  - `false` = generated `Res` class is internal
  - default: `false`

`packageOfResClass`
  - package to generate the `Res` class into
  - default: `<group name>.<module name>.generated.resources`

`generateResClass`
   - `always` - generate the `Res` class
   - `auto` - generate the `Res` class
   - `never` - do not generate the `Res` class
   - default: `auto`

## Qualifiers

All resource types (except for raw files in the files directory) support qualifiers.
Apply qualifiers to directory names using a hyphen, for example:

`drawable-hu-rHU-hdpi-light`
- `hu` language
- `rHU` country
- `hdpi` density
- `light` theme

You can add these qualifiers:

- language
- theme
- density

If a resource with the requested qualifier doesn't exist, the default resource without a qualifier is used instead.

### Language and regional qualifiers

The language is defined by:

- a two-letter (ISO 639-1) 
- or a three-letter (ISO 639-2) language code

To specify the country, add a ISO 3166-1-alpha-2 country code with an `r` prefix, like `hu-rHU`.

The language and country codes are case-sensitive.

### Theme qualifier

- `light`
- `dark`

### Densities

- `ldpi` − 120 DPI, 0.75x density
- `mdpi` − 160 DPI, 1x density
- `hdpi` − 240 DPI, 1.5x density
- `xhdpi` − 320 DPI, 2x density
- `xxhdpi` − 480 DPI, 3x density
- `xxxhdpi` − 640dpi, 4x density

### Sources

Check these files to see how the given qualifier is retrieved on the given platoform:

| Platform | Class                                                                                                                                  |
|----------|----------------------------------------------------------------------------------------------------------------------------------------|
| android  | [ResourceEnvironment.android.kt](/adaptive-core/src/androidMain/kotlin/hu/simplexion/adaptive/resource/ResourceEnvironment.android.kt) |
| ios      | [ResourceEnvironment.apple.kt](/adaptive-core/src/appleMain/kotlin/hu/simplexion/adaptive/resource/ResourceEnvironment.apple.kt)       |
| browser  | [ResourceEnvironment.js.kt](/adaptive-core/src/jsMain/kotlin/hu/simplexion/adaptive/resource/ResourceEnvironment.js.kt)                |

## Res class

The `Res` class is generated by these:

- project import into IDEA
- `./gradlew build`
- `./gradlew generateAdaptiveResClass`

You can find the class in the `build\generated` directory:

![Res class](res-class.png)

## Using resources

You can simply use the resource items directly in adaptive functions which support them:

```kotlin
@Adaptive 
fun bg() {
    image(R.drawable.background)
}
```