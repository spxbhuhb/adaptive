# WireFormat

A simple serialization library for Kotlin, part of [Z2](../../README.md). Its main purpose is to
provide serialization for [Services](../services/README.md). It is optimized for handling function calls.

WireFormat supports [JSON](https://json.org) and [Protobuf](https://protobuf.dev) out of the box, Protobuf being the
default, JSON is provided for the faint-hearted.

To switch to JSON put this somewhere into your bootstrap:

```properties
defaultWireFormatProvider=JsonWireFormatProvider()
```

## Supported Data Types

The table below shows the data types supported by WireFormat serialization.

User defined classes that have the WireFormat supertype will have a companion object
generated by the compiler plugin with WireFormatCompanion supertype and the appropriate
encoding/decoding methods.

| Type                             | Support |
|----------------------------------|---------|
| **Kotlin Built-in**              |         |
| kotlin.Any                       | planned |
| T? (a.k.a. `null`)               | full    |
| kotlin.Nothing                   | -       |
| kotlin.Unit                      | full    | 
| kotlin.Boolean                   | full    |
| kotlin.Int                       | full    |
| kotlin.Short                     | full    |
| kotlin.Byte                      | full    |
| kotlin.Long                      | full    |
| kotlin.Float                     | full    |
| kotlin.Double                    | full    |
| kotlin.Char                      | full    |
| kotlin.String                    | full    | 
| kotlin.Enum<T>                   | full    |
| kotlin.Array<T>                  | -       |
| kotlin.BooleanArray              | -       |
| kotlin.IntArray                  | -       |
| kotlin.ShortArray                | -       |
| kotlin.ByteArray                 | -       |
| kotlin.LongArray                 | -       |
| kotlin.DoubleArray               | -       |
| kotlin.FloatArray                | -       |
| kotlin.CharArray                 | -       |
| kotlin.Iterator                  | -       |
| kotlin.Throwable                 | -       |
| kotlin.Comparable                | -       |
| kotlin.Function                  | -       |
| **Kotlin Unsigned**              |         | 
| UByte                            | full    |
| UInt                             | full    |
| UShort                           | full    |
| ULong                            | full    |
| UByteArray                       | full    | 
| UShortArray                      | full    |
| UIntArray                        | full    |
| ULongArray                       | full    |
| **Kotlin Collections**           |         |
| kotlin.collections.Iterable      | -       |
| kotlin.collections.Collection    | -       |
| kotlin.collections.List          | partial |
| kotlin.collections.MutableList   | -       |
| kotlin.collections.Set           | -       |
| kotlin.collections.MutableSet    | -       |
| kotlin.collections.Map           | -       |
| kotlin.collections.MutableMap    | -       |
| kotlin.collections.ArrayDeque    | -       | 
| **Kotlin Time**                  |         |
| kotlin.time.Duration             | full    |
| **kotlinx-datetime**             |         |
| kotlinx.datetime.Instant         | full    |
| kotlinx.datetime.Clock           | -       |
| kotlinx.datetime.LocalDateTime   | full    |
| kotlinx.datetime.LocalDate       | full    |
| kotlinx.datetime.LocalTime       | full    |
| kotlinx.datetime.TimeZone        | -       |
| kotlinx.datetime.Month           | full    |
| kotlinx.datetime.DayOfWeek       | full    |
| kotlinx.datetime.DateTimePeriod  | -       |
| kotlinx.datetime.DatePeriod      | -       |
| kotlinx.datetime.DateTimeUnit    | -       |
| kotlinx.datetime.UtcOffset       | -       |
| **Z2**                           |         |
| hu.simplexion.z2.utility.UUID<T> | full    |

## Special Cases

### Unit

- `Unit` is transported as a boolean with value `true`
- `Unit?` is transported as a nullable boolean, with value `true` when not null